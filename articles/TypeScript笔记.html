<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--
***************  *      *     *
      8          *    *       *
      8          *  *         *
      8          **           *
      8          *  *         *
      8          *    *       *
      8          *      *     *
      8          *        *   ***********    -----Theme By Kieran(http://go.kieran.top)
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<!--<![endif]-->

<head>
  <title>TypeScript笔记 | ROC&#39;S BLOG</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="ROC'S BLOG">
    <meta name="author" content="Roc">
    <meta name="description" content="Tomorrow is another day" />
    <meta name="keywords" content="" />

    <!-- Site Verification -->
    <meta name="google-site-verification" content="rLdwH5LrBNt776dG8hn0-hKgHw1zRHW0xNcKVgGrAdw" />
    <meta name="baidu-site-verification" content="K92LESletm" />
    <meta name="360-site-verification" content="70d16b5dd18da9212ce9013090edc367" />
    <meta name="msvalidate.01" content="BCF1684AC274828EE2C1EE2058ECACF1" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/favicon.ico" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="ROC&#39;S BLOG" type="application/atom+xml">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
    
    <link rel="stylesheet" href="/highlightjs/vs.css" type="text/css">
    

    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->

  
  
  
  <!-- Analytics -->
  
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-109066492-1', 'auto');ga('send', 'pageview');
</script>
  
  
      <script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?5e636182d74fd9ac48aefe62cf361064';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>
  
  

  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="/img/close.png" alt="Close"/>
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">Home</a></li>
            <li><a href="/archives" class="animsition-link" title="archive">archives</a></li>
            <!-- Dropdown Menu -->
			 
            
        	<li>
        		<a class="sb-toggle-submenu">Categories<span class="sb-caret"></span></a>
            	<ul class="sb-submenu">
				  	
				    <li><a href="/categories/ES6/" class="animsition-link">ES6<small>(6)</small></a></li>
				    
				    <li><a href="/categories/blog/" class="animsition-link">blog<small>(1)</small></a></li>
				    
				    <li><a href="/categories/javascript/" class="animsition-link">javascript<small>(5)</small></a></li>
				    
				    <li><a href="/categories/nodejs/" class="animsition-link">nodejs<small>(1)</small></a></li>
				    
				    <li><a href="/categories/react/" class="animsition-link">react<small>(3)</small></a></li>
				    
				    <li><a href="/categories/日志/" class="animsition-link">日志<small>(1)</small></a></li>
				    
				    <li><a href="/categories/移动端/" class="animsition-link">移动端<small>(3)</small></a></li>
				    
				    <li><a href="/categories/笔记/" class="animsition-link">笔记<small>(10)</small></a></li>
				    
				</ul>
        	</li>
            
            
            <li>
                <a class="sb-toggle-submenu">tags<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                        
                    <li><a href="/tags/ES6/" class="animsition-link">ES6<small>(8)</small></a></li>
                    
                    <li><a href="/tags/Github-Actions/" class="animsition-link">Github Actions<small>(1)</small></a></li>
                    
                    <li><a href="/tags/GraphQL/" class="animsition-link">GraphQL<small>(1)</small></a></li>
                    
                    <li><a href="/tags/Taro-1/" class="animsition-link">Taro 1<small>(1)</small></a></li>
                    
                    <li><a href="/tags/Taro-3/" class="animsition-link">Taro 3<small>(1)</small></a></li>
                    
                    <li><a href="/tags/TypeScript/" class="animsition-link">TypeScript<small>(1)</small></a></li>
                    
                    <li><a href="/tags/antd-mobile/" class="animsition-link">antd-mobile<small>(1)</small></a></li>
                    
                    <li><a href="/tags/apply/" class="animsition-link">apply<small>(1)</small></a></li>
                    
                    <li><a href="/tags/bind/" class="animsition-link">bind<small>(1)</small></a></li>
                    
                    <li><a href="/tags/call/" class="animsition-link">call<small>(1)</small></a></li>
                    
                    <li><a href="/tags/callee/" class="animsition-link">callee<small>(1)</small></a></li>
                    
                    <li><a href="/tags/caller/" class="animsition-link">caller<small>(1)</small></a></li>
                    
                    <li><a href="/tags/centos7/" class="animsition-link">centos7<small>(1)</small></a></li>
                    
                    <li><a href="/tags/git/" class="animsition-link">git<small>(1)</small></a></li>
                    
                    <li><a href="/tags/git操作/" class="animsition-link">git操作<small>(1)</small></a></li>
                    
                    <li><a href="/tags/hexo/" class="animsition-link">hexo<small>(1)</small></a></li>
                    
                    <li><a href="/tags/linux/" class="animsition-link">linux<small>(1)</small></a></li>
                    
                    <li><a href="/tags/next/" class="animsition-link">next<small>(1)</small></a></li>
                    
                    <li><a href="/tags/nodejs/" class="animsition-link">nodejs<small>(1)</small></a></li>
                    
                    <li><a href="/tags/npm/" class="animsition-link">npm<small>(2)</small></a></li>
                    
                    <li><a href="/tags/promise/" class="animsition-link">promise<small>(1)</small></a></li>
                    
                    <li><a href="/tags/react/" class="animsition-link">react<small>(3)</small></a></li>
                    
                    <li><a href="/tags/react-lazy/" class="animsition-link">react.lazy<small>(1)</small></a></li>
                    
                    <li><a href="/tags/rem布局/" class="animsition-link">rem布局<small>(1)</small></a></li>
                    
                    <li><a href="/tags/rest运算符/" class="animsition-link">rest运算符<small>(1)</small></a></li>
                    
                    <li><a href="/tags/setTimeout/" class="animsition-link">setTimeout()<small>(1)</small></a></li>
                    
                    <li><a href="/tags/vue/" class="animsition-link">vue<small>(1)</small></a></li>
                    
                    <li><a href="/tags/主题/" class="animsition-link">主题<small>(1)</small></a></li>
                    
                    <li><a href="/tags/单例模式/" class="animsition-link">单例模式<small>(1)</small></a></li>
                    
                    <li><a href="/tags/变量的结构赋值/" class="animsition-link">变量的结构赋值<small>(1)</small></a></li>
                    
                    <li><a href="/tags/字符串/" class="animsition-link">字符串<small>(1)</small></a></li>
                    
                    <li><a href="/tags/安卓调试/" class="animsition-link">安卓调试<small>(1)</small></a></li>
                    
                    <li><a href="/tags/对象/" class="animsition-link">对象<small>(1)</small></a></li>
                    
                    <li><a href="/tags/小程序开发/" class="animsition-link">小程序开发<small>(1)</small></a></li>
                    
                    <li><a href="/tags/循环/" class="animsition-link">循环<small>(1)</small></a></li>
                    
                    <li><a href="/tags/微信支付/" class="animsition-link">微信支付<small>(1)</small></a></li>
                    
                    <li><a href="/tags/心情/" class="animsition-link">心情<small>(1)</small></a></li>
                    
                    <li><a href="/tags/手写题/" class="animsition-link">手写题<small>(1)</small></a></li>
                    
                    <li><a href="/tags/扩展运算符/" class="animsition-link">扩展运算符<small>(1)</small></a></li>
                    
                    <li><a href="/tags/数组/" class="animsition-link">数组<small>(2)</small></a></li>
                    
                    <li><a href="/tags/树莓派/" class="animsition-link">树莓派<small>(1)</small></a></li>
                    
                    <li><a href="/tags/模块化/" class="animsition-link">模块化<small>(1)</small></a></li>
                    
                    <li><a href="/tags/移动端/" class="animsition-link">移动端<small>(2)</small></a></li>
                    
                    <li><a href="/tags/组件模式/" class="animsition-link">组件模式<small>(1)</small></a></li>
                    
                    <li><a href="/tags/背景/" class="animsition-link">背景<small>(1)</small></a></li>
                    
                    <li><a href="/tags/设计模式/" class="animsition-link">设计模式<small>(1)</small></a></li>
                    
                    <li><a href="/tags/遍历/" class="animsition-link">遍历<small>(1)</small></a></li>
                    
                    <li><a href="/tags/面试/" class="animsition-link">面试<small>(1)</small></a></li>
                    
                </ul>
            </li>
            
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            
            <li><a href="/about.html" class="animsition-link" title="about">About</a></li>
            <!-- <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li> -->
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                         <img src="/img/logo.jpg" alt="Logo" width="35px;"/> 
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">ROC'S BLOG</a></li>
                            <li class="nolink"><span>Always </span>Creative.</li>
                            
                            <li><a href="https://github.com/shenpvip" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            
                            
                            
                            <li><a href="http://weibo.com/shenpvip" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
                            <li class="nolink"><span>Welcome!</span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">More</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->


      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2019-03-02T16:43:29.000Z" itemprop="datePublished">
          2019-03-02
      </time>
    
    
    | 
    <a href='/tags/ES6/'>ES6</a>,
    
    <a href='/tags/TypeScript/'>TypeScript</a>
    
    
</span>
                <h1>TypeScript笔记</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<h2 id="一、声明文件"><a href="#一、声明文件" class="headerlink" title="一、声明文件"></a>一、声明文件</h2><blockquote>
<p>当使用第三方库时，我们需要引用它的声明文件。</p>
</blockquote>
<h4 id="声明语句"><a href="#声明语句" class="headerlink" title="声明语句"></a>声明语句</h4><p>假如我们想使用第三方库，比如 jQuery，我们通常这样获取一个 id 是 foo 的元素：</p>
<pre><code>jQuery(&apos;#foo&apos;);

// index.ts(1,1): error TS2304: Cannot find name &apos;jQuery&apos;.

declare var jQuery: (selector: string) =&gt; any;

jQuery(&apos;#foo&apos;);
</code></pre><p>declare 定义的类型只会用于编译时的检查，编译结果中会被删除。</p>
<h4 id="声明文件"><a href="#声明文件" class="headerlink" title="声明文件"></a>声明文件</h4><p>通常我们会把类型声明放到一个单独的文件中，这就是声明文件：</p>
<pre><code>// jQuery.d.ts

declare var jQuery: (string) =&gt; any;
</code></pre><blockquote>
<p>我们约定声明文件以 <code>.d.ts</code> 为后缀。</p>
</blockquote>
<p>然后在使用到的文件的开头，用「三斜线指令」表示引用了声明文件：</p>
<pre><code>/// &lt;reference path=&quot;./jQuery.d.ts&quot; /&gt;

jQuery(&apos;#foo&apos;);
</code></pre><h4 id="第三方声明文件"><a href="#第三方声明文件" class="headerlink" title="第三方声明文件"></a>第三方声明文件</h4><pre><code>npm install @types/jquery --save-dev
</code></pre><h2 id="二、命名空间"><a href="#二、命名空间" class="headerlink" title="二、命名空间"></a>二、命名空间</h2><blockquote>
<p>“内部模块”现在称做“命名空间”。 “外部模块”现在则简称为“模块”，这是为了与 ECMAScript 2015里的术语保持一致</p>
</blockquote>
<pre><code>namespace Utility {
  export function log(msg) {
    console.log(msg);
  }
  export function error(msg) {
    console.log(msg);
  }
}

// usage
Utility.log(&apos;Call me&apos;);
Utility.error(&apos;maybe&apos;);
</code></pre><p>命名空间：代码层面的归类和管理。将有相似功能的代码都归一到同一个空间下进行管理，方便其他代码引用。更多的是侧重代码的复用。</p>
<p>模块：一个完整功能的封装，对外提供的是一个具有完整功能的功能包，需要显式引用。一个模块里可能会有多个命名空间。</p>
<h2 id="三、interface-与-type"><a href="#三、interface-与-type" class="headerlink" title="三、interface 与 type"></a>三、interface 与 type</h2><h4 id="相同点"><a href="#相同点" class="headerlink" title="相同点"></a>相同点</h4><h4 id="都可以描述一个对象或者函数。"><a href="#都可以描述一个对象或者函数。" class="headerlink" title="都可以描述一个对象或者函数。"></a>都可以描述一个对象或者函数。</h4><h5 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h5><pre><code>interface User {
  name: string
  age: number
}

interface SetUser {
  (name: string, age: number): void;
}
</code></pre><h5 id="type"><a href="#type" class="headerlink" title="type"></a>type</h5><pre><code>type User = {
  name: string
  age: number
};

type SetUser = (name: string, age: number): void;
</code></pre><h4 id="都允许拓展（extends）"><a href="#都允许拓展（extends）" class="headerlink" title="都允许拓展（extends）"></a>都允许拓展（extends）</h4><blockquote>
<p>interface 和 type 都可以拓展，并且两者并不是相互独立的，也就是说 interface 可以 extends type, type 也可以 extends interface 。 ==虽然效果差不多，但是两者语法不同。==</p>
</blockquote>
<h5 id="interface-extends-interface"><a href="#interface-extends-interface" class="headerlink" title="interface extends interface"></a>interface extends interface</h5><pre><code>interface Name { 
  name: string; 
}
interface User extends Name { 
  age: number; 
}
</code></pre><h5 id="type-extends-type"><a href="#type-extends-type" class="headerlink" title="type extends type"></a>type extends type</h5><pre><code>type Name = { 
  name: string; 
}
type User = Name &amp; { age: number  };
</code></pre><h5 id="interface-extends-type"><a href="#interface-extends-type" class="headerlink" title="interface extends type"></a>interface extends type</h5><pre><code>type Name = { 
  name: string; 
}
interface User extends Name { 
  age: number; 
}
</code></pre><h5 id="type-extends-interface"><a href="#type-extends-interface" class="headerlink" title="type extends interface"></a>type extends interface</h5><pre><code>interface Name { 
  name: string; 
}
type User = Name &amp; { 
  age: number; 
}
</code></pre><h4 id="不同点"><a href="#不同点" class="headerlink" title="不同点"></a>不同点</h4><h5 id="type-可以而-interface-不行"><a href="#type-可以而-interface-不行" class="headerlink" title="type 可以而 interface 不行"></a>type 可以而 interface 不行</h5><blockquote>
<p>type 可以声明基本类型别名，联合类型，元组等类型</p>
</blockquote>
<pre><code>// 基本类型别名
type Name = string;
// 联合类型
type NameResolver = () =&gt; string;
type NameOrResolver = Name | NameResolver;
function getName(n: NameOrResolver): Name {
    if (typeof n === &apos;string&apos;) {
        return n;
    } else {
        return n();
    }
}
</code></pre><blockquote>
<p>type 语句中还可以使用 typeof 获取实例的 类型进行赋值</p>
</blockquote>
<pre><code>// 当你想获取一个变量的类型时，使用 typeof
let div = document.createElement(&apos;div&apos;);
type B = typeof div
</code></pre><h5 id="interface-可以而-type-不行"><a href="#interface-可以而-type-不行" class="headerlink" title="interface 可以而 type 不行"></a>interface 可以而 type 不行</h5><blockquote>
<p>interface 能够声明合并</p>
</blockquote>
<pre><code>interface User {
  name: string
  age: number
}

interface User {
  sex: string
}

/*
User 接口为 {
  name: string
  age: number
  sex: string 
}
*/
</code></pre><p> 一般来说，如果不清楚什么时候用interface/type，能用 interface 实现，就用 interface , 如果不能就用 type </p>
<h2 id="四、元组"><a href="#四、元组" class="headerlink" title="四、元组"></a>四、元组</h2><blockquote>
<p>数组合并了相同类型的对象，而元组（Tuple）合并了不同类型的对象。</p>
</blockquote>
<pre><code>let xcatliu: [string, number];
xcatliu[0] = &apos;Xcat Liu&apos;;
xcatliu[1] = 25;

let xcatliu: [string, number];
xcatliu = [&apos;Xcat Liu&apos;, 25];

let xcatliu: [string, number] = [&apos;Xcat Liu&apos;];

// index.ts(1,5): error TS2322: Type &apos;[string]&apos; is not assignable to type &apos;[string, number]&apos;.
//   Property &apos;1&apos; is missing in type &apos;[string]&apos;.
</code></pre><h2 id="五、枚举"><a href="#五、枚举" class="headerlink" title="五、枚举"></a>五、枚举</h2><blockquote>
<p>枚举（Enum）类型用于取值被限定在一定范围内的场景</p>
</blockquote>
<p>常量统一使用枚举定义,统一使用全大写加_定义</p>
<h4 id="数字类型枚举"><a href="#数字类型枚举" class="headerlink" title="数字类型枚举"></a>数字类型枚举</h4><p>枚举成员会被赋值为从 0 开始递增的数字，同时也会对枚举值到枚举名进行反向映射：</p>
<pre><code>enum Direction {
    Up,
    Down,
    Left,
    Right,
}
console.log(Drection[&apos;Up&apos;]);    // 0

enum Direction {
    Up = 1,
    Down,
    Left,
    Right,
}
console.log(Drection[&apos;Up&apos;]);    // 1

enum ECode {
  OPERATION_SUCCESS = 10000, // &quot;操作成功&quot;
  GAIN_SUCCESS = 10001, // &quot;成功获取数据，数据非空&quot;
  GAIN_SUCCESS_EMPTY = 10002, // &quot;操作成功,数据为空&quot;
}
</code></pre><h4 id="字符串枚举"><a href="#字符串枚举" class="headerlink" title="字符串枚举"></a>字符串枚举</h4><pre><code>enum EvidenceTypeEnum {
  UNKNOWN = &apos;&apos;,
  PASSPORT_VISA = &apos;passport_visa&apos;,
  PASSPORT = &apos;passport&apos;,
  SIGHTED_STUDENT_CARD = &apos;sighted_tertiary_edu_id&apos;,
  SIGHTED_KEYPASS_CARD = &apos;sighted_keypass_card&apos;,
  SIGHTED_PROOF_OF_AGE_CARD = &apos;sighted_proof_of_age_card&apos;
}
console.log(EvidenceTypeEnum.PASSPORT); // passport
</code></pre><h2 id="六、泛型"><a href="#六、泛型" class="headerlink" title="六、泛型"></a>六、泛型</h2><blockquote>
<p>泛型（Generics）是指在定义函数、接口或类的时候，不预先指定具体的类型，而在使用的时候再指定类型的一种特性。</p>
</blockquote>
<p>我们来实现一个函数 createArray，它可以创建一个指定长度的数组，同时将每一项都填充一个默认值：</p>
<pre><code>function createArray&lt;T&gt;(length: number, value: T): Array&lt;T&gt; {
    let result: T[] = [];
    for (let i = 0; i &lt; length; i++) {
        result[i] = value;
    }
    return result;
}

createArray&lt;string&gt;(3, &apos;x&apos;); // [&apos;x&apos;, &apos;x&apos;, &apos;x&apos;]
</code></pre><h4 id="多个类型参数"><a href="#多个类型参数" class="headerlink" title="多个类型参数"></a>多个类型参数</h4><pre><code>function swap&lt;T, U&gt;(tuple: [T, U]): [U, T] {
    return [tuple[1], tuple[0]];
}

swap([7, &apos;seven&apos;]); // [&apos;seven&apos;, 7]
</code></pre><p>我们定义了一个 swap 函数，用来交换输入的元组。</p>
<h4 id="泛型接口"><a href="#泛型接口" class="headerlink" title="泛型接口"></a>泛型接口</h4><pre><code>interface CreateArrayFunc&lt;T&gt; {
    (length: number, value: T): Array&lt;T&gt;;
}

let createArray: CreateArrayFunc&lt;any&gt;;
createArray = function&lt;T&gt;(length: number, value: T): Array&lt;T&gt; {
    let result: T[] = [];
    for (let i = 0; i &lt; length; i++) {
        result[i] = value;
    }
    return result;
}

createArray(3, &apos;x&apos;); // [&apos;x&apos;, &apos;x&apos;, &apos;x&apos;]
</code></pre><h4 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h4><pre><code>// 创建一个泛型类
class Queue&lt;T&gt; {
    private data = [];
    push = (item: T) =&gt; this.data.push(item);
    pop = (): T =&gt; this.data.shift();
}
</code></pre><h4 id="泛型参数的默认类型"><a href="#泛型参数的默认类型" class="headerlink" title="泛型参数的默认类型"></a>泛型参数的默认类型</h4><p>在 TypeScript 2.3 以后，我们可以为泛型中的类型参数指定默认类型。当使用泛型时没有在代码中直接指定类型参数，从实际值参数中也无法推测出时，这个默认类型就会起作用。</p>
<pre><code>function createArray&lt;T = string&gt;(length: number, value: T): Array&lt;T&gt; {
    let result: T[] = [];
    for (let i = 0; i &lt; length; i++) {
        result[i] = value;
    }
    return result;
}
</code></pre><p>你想用它来提供什么样的约束。如果你不能很好的回答它，你可能会误用泛型, 如</p>
<pre><code>function foo&lt;T&gt;(arg: T): void;
</code></pre><p>使用如下方式可能更好</p>
<pre><code>function foo(arg: any): void;
</code></pre><h2 id="七、readonly"><a href="#七、readonly" class="headerlink" title="七、readonly"></a>七、readonly</h2><pre><code>interface IFoo {
  readonly name : 1
  bar: number
  bas: number
}

// 数组 
let foo: ReadonlyArray&lt;number&gt; = [1, 2, 3]
console.log(foo[0]) // ok
foo.push(4); // Error: ReadonlyArray 上不存在push，因为他会改变数组
foo = foo.concat(4) // ok, 创建了一个复制

// 项目统一使用
import React, { PureComponent } from &apos;react&apos;
const initialState = {}
interface IProps {}
interface IState {}
export default class Demo extends PureComponent&lt;IProps, IState&gt; {
   readonly state: IState = initialState
   render() {
       return (
           &lt;div&gt;&lt;/div&gt;
       )
   }
}
</code></pre><h4 id="与-const-的不同"><a href="#与-const-的不同" class="headerlink" title="与 const 的不同"></a>与 <code>const</code> 的不同</h4><p><code>const</code></p>
<ul>
<li>用于常量；</li>
</ul>
<p><code>readonly</code></p>
<ul>
<li>用于属性；</li>
</ul>
<pre><code>const foo = 123; // 变量

let bar: {
  readonly len: number; // 属性
};
</code></pre><h2 id="八、联合类型"><a href="#八、联合类型" class="headerlink" title="八、联合类型"></a>八、联合类型</h2><blockquote>
<p>联合类型（Union Types）表示取值可以为多种类型中的一种。</p>
</blockquote>
<pre><code>interface ISquare {
  kind: &apos;square&apos;
  size: number
}

interface IRectangle {
  kind: &apos;rectangle&apos;
  width: number
  height: number
}

type TShape = ISquare | IRectangle

// 条件判断
function area(s: TShape) {
  if (s.kind === &apos;square&apos;) {
    // 现在 TypeScript 知道 s 的类型是 Square
    // 所以你现在能安全使用它
    return s.size * s.size
  }
  // 不是一个 square ？因此 TypeScript 将会推算出 s 一定是 Rectangle
  return s.width * s.height
}

//  switch
function area(s: TShape) {
  switch (s.kind) {
    case &apos;square&apos;:
      return s.size * s.size;
    case &apos;rectangle&apos;:
      return s.width * s.height;
    default:
      const _exhaustiveCheck: never = s;
  }
}

area({kind:&apos;square&apos;, size: 1})
area({kind:&apos;rectangle&apos;, size: 1}) // Error
area({kind:&apos;rectangle&apos;, width: 1, height: 2})
area({kind:&apos;square&apos;, width: 1, height: 2}) // Error
</code></pre><h2 id="九、类是有用的"><a href="#九、类是有用的" class="headerlink" title="九、类是有用的"></a>九、类是有用的</h2><pre><code>function foo() {
  let someProperty;

  // 一些其他的初始化代码

  function someMethod() {
    // 用 someProperty 做一些事情
    // 可能有其他属性
  }

  // 可能有其他的方法
  return {
    someMethod
    // 可能有其他方法
  };
};
</code></pre><p>上面是在应用中常见的闭包，可以使用类的方式来重写</p>
<pre><code>class Foo {
  public someProperty;

  constructor() {
    // 一些初始化内容
  }

  public someMethod() {
    // ..code
  }

  public someUtility() {
    // .. code
  }
}

export = new Foo();
</code></pre><p>这并不仅仅有利于开发者，在创建基于类的更出色可视化工具中，它更常见。并且，这有利于项目的理解和维护。</p>
<h2 id="十、明确的类型转换"><a href="#十、明确的类型转换" class="headerlink" title="十、明确的类型转换"></a>十、明确的类型转换</h2><pre><code>if (123) {
  // 将会被推断出 `true`
  console.log(&apos;Any number other than 0 is truthy&apos;);
}
</code></pre><p>通过操作符 <code>!!</code>，你可以很容易的将某些值转化为布尔类型的值。</p>
<pre><code>// Direct variables
const hasName = !!name;

// As members of objects
const someObj = {
  hasName: !!name
};

// ReactJS
{
  !!someName &amp;&amp; &lt;div&gt;{someName}&lt;/div&gt;;
}
</code></pre><h2 id="十一、函数参数"><a href="#十一、函数参数" class="headerlink" title="十一、函数参数"></a>十一、函数参数</h2><p>如果一个函数含有很多参数或者相同类型参数，可以使用对象的形式来替代这些函数参数：</p>
<pre><code>function foo(flagA: boolean, flagB: boolean) {
  // 函数主体
}
</code></pre><p>像这样的函数，你可能会很容易错误的调用它，如 foo(flagB, flagA)，并且你并不会从编译器得到想要的帮助。</p>
<p>使用接收一个对象参数的形式：</p>
<pre><code>function foo(
  config: {
    flagA: boolean;
    flagB: boolean;
  }
) {
  const { flagA, flagB } = config;
}
</code></pre><p>现在，函数将会被 foo({ flagA, flagB }) 的形式调用，这样有利于发现错误及代码审查。</p>
<h2 id="十二、对象字面量的惰性初始化"><a href="#十二、对象字面量的惰性初始化" class="headerlink" title="十二、对象字面量的惰性初始化"></a>十二、对象字面量的惰性初始化</h2><p>在 JavaScript 中，像这样用字面量初始化对象的写法十分常见：</p>
<pre><code>let foo = {};
foo.bar = 123;
foo.bas = &apos;Hello World&apos;;
</code></pre><p>但在 TypeScript 中，同样的写法就会报错：</p>
<pre><code>let foo = {};
foo.bar = 123; // Error: Property &apos;bar&apos; does not exist on type &apos;{}&apos;
foo.bas = &apos;Hello World&apos;; // Error: Property &apos;bas&apos; does not exist on type &apos;{}&apos;
</code></pre><p>这是因为 TypeScript 在解析 let foo = {} 这段赋值语句时，会进行“类型推断”：它会认为等号左边 foo 的类型即为等号右边 {} 的类型。由于 {} 本没有任何属性，因此，像上面那样给 foo 添加属性时就会报错。</p>
<pre><code>// 最好的解决方案

let foo = {
  bar: 123,
  bas: &apos;Hello World&apos;
};

// 折中方案
interface Foo {
  bar: number;
  bas: string;
}

let foo = {} as Foo;
foo.bar = 123;
foo.bas = &apos;Hello World&apos;;
</code></pre>
            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="m-pagination col-md-8 col-md-offset-2 col-sm-24" role="pagination">
    
    <a class="pull-left" href="/articles/Github Actions部署hexo博客.html" style="float: left;">
        ← Github Actions部署hexo博客
    </a>
    
    
    <a class="pull-right" href="/articles/GraphQL入门.html">
        GraphQL入门 →
    </a>
    
</nav>

        <div class="col-md-8 col-md-offset-2 col-sm-24"><script type="text/javascript">
  /**
   * 搜狐畅言
   */

  /*
  document.write('<div id="SOHUCS" sid="' + window.location.pathname.slice(1) + '" ></div>');

  window.onload = function () {
    (function () {
      var appid = 'cytXXXX';
      var conf = 'prod_xxxxxxxxxxxxxxxxx';
      var width = window.innerWidth || document.documentElement.clientWidth;
      var loadJs = function (d, a, id) {
        var c = document.getElementsByTagName("head")[0] || document.head || document.documentElement;
        var b = document.createElement("script");
        b.setAttribute("type", "text/javascript");
        b.setAttribute("charset", "UTF-8");
        b.setAttribute("src", d);
        if (id) {
          b.setAttribute("id", id);
        }
        if (typeof a === "function") {
          if (window.attachEvent) {
            b.onreadystatechange = function () {
              var e = b.readyState;
              if (e === "loaded" || e === "complete") {
                b.onreadystatechange = null;
                a()
              }
            }
          } else {
            b.onload = a
          }
        }
        c.appendChild(b)
      };

      loadJs("https://changyan.sohu.com/upload/changyan.js", function () {
        window.changyan.api.config({
          appid: appid,
          conf: conf
        })
      });
    })();
  }
  */

</script>
</div>
    </div>
</section>


      <!-- ============================ Footer =========================== -->

<footer>
  <div class="container">
    <div class="copy">
      <p>
        &copy; 2014
        <script>
          new Date().getFullYear() > 2010 &&
            document.write('-' + new Date().getFullYear())
        </script>
        , Content By Roc. All Rights Reserved.
      </p>
      <!-- <p>Theme By <a href="//go.kieran.top" style="color: #767D84">Kieran</a></p> -->
      
      <script
        async
        src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"
      ></script>
      <p>
        <span id="busuanzi_container_site_uv"
          >欢迎你，Roc的第<span id="busuanzi_value_site_uv"></span>位朋友！</span
        >
        <span id="busuanzi_container_site_pv"
          >网站总访问量<span id="busuanzi_value_site_pv"></span>人次</span
        >
      </p>
      
    </div>
    <div class="social">
      <ul>
        
        <li>
          <a href="https://github.com/shenpvip" title="Github" target="_blank"
            ><i class="icon-github"></i></a
          >&nbsp;
        </li>
            
        <li>
          <a href="http://weibo.com/shenpvip" title="Sina-Weibo" target="_blank"
            ><i class="icon-sina-weibo"></i></a
          >&nbsp;
        </li>
        
      </ul>
    </div>
    <div class="clearfix"></div>
  </div>
</footer>

<!-- ============================ END Footer =========================== -->

      <!-- Load our scripts -->
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };

    resizeHero();

    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$('#intro').find('img').each(function(){
  var alt = this.alt;

  if (alt){
    $(this).after('<span class="caption" style="display:none">' + alt + '</span>');
  }

  $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="gallery" />');
});
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



      
</body>
</html>
